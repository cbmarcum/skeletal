<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Carl Marcum">
<title>Template Developers Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
    margin-bottom: 1.25em;
}

.tablist > ul {
    display: flex;
    flex-wrap: wrap;
    list-style: none;
    margin: 0;
    padding: 0;
}

.tablist > ul li {
    align-items: center;
    background-color: #fff;
    cursor: pointer;
    display: flex;
    font-weight: bold;
    line-height: 1.5;
    padding: 0.25em 1em;
    position: relative;
}

.tablist > ul li:focus-visible {
    outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
    margin: 0;
}

.tablist.ulist > ul li + li {
    margin-left: 0.25em;
}

.tabs .tablist li::after {
    content: "";
    display: block;
    height: 1px;
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
    background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
    background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
    line-height: inherit;
    margin: 0;
}

.tabpanel {
    background-color: #fff;
    padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
    border: 1px solid #dcdcdc;
}

.tablist > ul li {
    border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
    display: none;
}

.tabpanel > :first-child {
    margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
    margin-bottom: 0;
}

.tablecontainer {
    overflow-x: auto;
}

#content .tablecontainer {
    margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
    margin-bottom: 0;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Template Developers Guide</h1>
<div class="details">
<span id="author" class="author">Carl Marcum</span><br>
<span id="email" class="email"><a href="mailto:carl.marcum@codebuilders.net">carl.marcum@codebuilders.net</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_quick_links">Quick Links</a></li>
<li><a href="#_preface">Preface</a></li>
<li><a href="#_getting_started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_creating_a_template">Creating a Template</a></li>
<li><a href="#_creating_a_post_install_script">Creating a Post-install Script</a></li>
<li><a href="#_install_into_cache_and_test">Install into Cache and Test</a></li>
<li><a href="#_packaging_installing_and_publishing">Packaging, Installing and Publishing</a></li>
<li><a href="#_fine_tuning_the_packaging">Fine-tuning the Packaging</a></li>
</ul>
</li>
<li><a href="#_simple_url_repositories">Simple URL Repositories</a></li>
<li><a href="#_template_engines">Template Engines</a></li>
<li><a href="#_subtemplates">Subtemplates</a></li>
<li><a href="#_post_install_script_in_depth">Post Install Script In-depth</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_quick_links">Quick Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/cbmarcum/skeletal">Skeletal Project</a></p>
</li>
<li>
<p><a href="https://cbmarcum.github.io/skeletal/index.html">Guide Home</a></p>
</li>
<li>
<p><a href="https://cbmarcum.github.io/skeletal/application-users-guide.html">Application Users Guide</a></p>
</li>
<li>
<p><a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html">Template Testing Companion</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface">Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instructions in this guide also refer to the
<a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html">Template Testing Companion</a> for testing templates during development.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing you want to do is set up a build for your templates, because creating and publishing a template involves several steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the directory structure and files for the template</p>
</li>
<li>
<p>Add VERSION, DESCRIPTION, and README files</p>
</li>
<li>
<p>Package the template structure into a zip, filtering out .retain, <code>VERSION</code>, and <code>DESCRIPTION</code> files</p>
</li>
<li>
<p>Publish the zip file to a repository by copying the manifest file and zip files to a file or http(s) URL.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Fortunately this is very easy because you can use Skeletal to set a project up for you! Simply run</p>
</div>
<div class="listingblock">
<div class="title">create command</div>
<div class="content">
<pre>skeletal create lazybones-project my-lzb-templates</pre>
</div>
</div>
<div class="paragraph">
<p>and you&#8217;ll get top-level <code>my-lzb-templates</code> directory which contains a simple <a href="http://www.gradle.org">Gradle</a> build file, gradle wrapper, a README.md, and a <code>templates</code> directory into which you put your templates.</p>
</div>
<div class="listingblock">
<div class="title">Directory Layout</div>
<div class="content">
<pre>my-lzb-templates
|-- gradle
|   `-- wrapper
|       |-- gradle-wrapper.jar
|       `-- gradle-wrapper.properties
|-- templates  <i class="conum" data-value="1"></i><b>(1)</b>
|-- build.gradle
|-- gradlew
|-- gradlew.bat
`-- README.md</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Directory for project templates</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>build.gradle</code> file applies the <a href="https://github.com/cbmarcum/skeletal-gradle-plugin">Skeletal Gradle Plugin</a> which provides the packaging and publishing commands and some properties needed for publishing.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">net.codebuilders.lazybones-templates</span><span style="color:#710">&quot;</span></span> version <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1.6.2</span><span style="color:#710">&quot;</span></span>  <i class="conum" data-value="1"></i><b>(1)</b>
}

lazybones {
    packageExclude <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.swp</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.swo</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/.gradle</span><span style="color:#710">&quot;</span></span>  <i class="conum" data-value="2"></i><b>(2)</b>
    templateOwner = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">&lt;owner of templates in this project&gt;</span><span style="color:#710">&quot;</span></span>  <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Apply the Skeletal Gradle Plugin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Ant-style pattern for excluding files</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Owner used for published templates</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next step is to create the template.</p>
</div>
<div class="sect2">
<h3 id="_creating_a_template">Creating a Template</h3>
<div class="paragraph">
<p>Lazybones templates are simple zip files containing a directory structure and a
bunch of files. How you create that zip file is up to you, but we&#8217;re going to use
the build that was created for us. It handles both the packaging and publishing
of templates, so we don&#8217;t have to worry about the details.</p>
</div>
<div class="paragraph">
<p>To get a project layout to begin with, we will use the <a href="https://docs.gradle.org/current/userguide/build_init_plugin.html#build_init_plugin">gradle init command</a>
to create a simple <a href="https://www.java.com/">Java</a> application with <a href="https://spockframework.org/">Spock</a>
tests and a <a href="https://gradle.org/">Gradle</a> build. We are using a template naming
convention of <code>app type-language-test type-build tool</code> to differentiate
between templates, but you can use whatever convention that best suites your needs.</p>
</div>
<div class="paragraph">
<p>Create a new directory <code>templates/java-gradle</code>.</p>
</div>
<div class="paragraph">
<p>from a shell in this directory:</p>
</div>
<div class="listingblock">
<div class="title">gradle init command</div>
<div class="content">
<pre>gradle init</pre>
</div>
</div>
<div class="ulist">
<div class="title">Answer the prompts:</div>
<ul>
<li>
<p>Select type of project to generate: <code>application</code></p>
</li>
<li>
<p>Select implementation language: <code>Java</code></p>
</li>
<li>
<p>Split functionality across multiple subprojects?: <code>no</code></p>
</li>
<li>
<p>Select build script DSL: <code>Groovy</code></p>
</li>
<li>
<p>Generate build using new APIs and behavior: <code>no</code></p>
</li>
<li>
<p>Select test framework: <code>Spock</code></p>
</li>
<li>
<p>Project name: <code>java-gradle</code></p>
</li>
<li>
<p>Source package: <code>org.example</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Generated project structure</div>
<div class="content">
<pre>|-- app <i class="conum" data-value="2"></i><b>(2)</b>
|   |-- src
|   |   |-- main
|   |   |   |-- java
|   |   |   |   `-- org
|   |   |   |       `-- example
|   |   |   |           `-- App.java <i class="conum" data-value="3"></i><b>(3)</b>
|   |   |   `-- resources
|   |   `-- test
|   |       |-- groovy
|   |       |   `-- org
|   |       |       `-- example
|   |       |           `-- AppTest.groovy <i class="conum" data-value="4"></i><b>(4)</b>
|   |       `-- resources
|   `-- build.gradle <i class="conum" data-value="5"></i><b>(5)</b>
|-- gradle
|   `-- wrapper
|       |-- gradle-wrapper.jar
|       `-- gradle-wrapper.properties
|-- .gitattributes
|-- .gitignore
|-- gradlew
|-- gradlew.bat
`-- settings.gradle <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="paragraph">
<p>Gradle multi-project build layout with:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>settings file with sub-projects listed</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>app sub-project</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>sample application</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>sample test</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>app sub-project build file</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In <code>java-gradle</code> create these files. See below for information on
their contents and also reference our sample in <a href="https://github.com/cbmarcum/skeletal/tree/main/lazybones-templates/templates/java-gradle">lazybones-templates/templates/java-gradle</a>
since they may be more complete than the basic content shown here.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>README.md</em> - a text file that contains information about the template.</p>
</li>
<li>
<p><em>VERSION</em> - a text file containing the current version number of the template.</p>
</li>
<li>
<p><em>DESCRIPTION</em> - a text file containing the description of the template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Adding an empty <code>.retain</code> file in a template allows us to include empty
directories in both a git repository and the template zip. The build simply
excludes <code>.retain</code> files when packaging the template while maintaining the
directory structure. Since the <code>.retain</code> files can be empty, a simple
<code>touch src/main/java/.retain</code> is sufficient.</p>
</div>
<div class="paragraph">
<p>Add empty <code>.retain</code> files as shown here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>app/src/main/resources/.retain</em></p>
</li>
<li>
<p><em>app/src/test/resources/.retain</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>app/build.gradle</code> file is part of this template project and contains:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins { <i class="conum" data-value="1"></i><b>(1)</b>
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">groovy</span><span style="color:#710">'</span></span>
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">application</span><span style="color:#710">'</span></span>
}

repositories {
    mavenCentral() <i class="conum" data-value="2"></i><b>(2)</b>
}

dependencies { <i class="conum" data-value="3"></i><b>(3)</b>
    testImplementation <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">org.codehaus.groovy:groovy:3.0.10</span><span style="color:#710">'</span></span>
    testImplementation <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">org.spockframework:spock-core:2.1-groovy-3.0</span><span style="color:#710">'</span></span>
    testImplementation <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">junit:junit:4.13.2</span><span style="color:#710">'</span></span>
    implementation <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">com.google.guava:guava:31.0.1-jre</span><span style="color:#710">'</span></span>
}

application {
    mainClass = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">org.example.App</span><span style="color:#710">'</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
}

tasks.named(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">test</span><span style="color:#710">'</span></span>) {
    <span style="color:#777">// Use JUnit Platform for unit tests.</span>
    useJUnitPlatform()
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Apply the Groovy and the Java application plugins</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the Maven Central repository for dependencies</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Dependencies</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the main class</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>VERSION</code> file is required by the build, because that&#8217;s how the build
knows what the current version of the template is. Just put any version string
into the file:</p>
</div>
<div class="listingblock">
<div class="title">VERSION</div>
<div class="content">
<pre>0.1.0</pre>
</div>
</div>
<div class="paragraph">
<p>No quotes. No markup. Just the version text. Note that the build excludes this
file from the template zip as the version is included in the zip file&#8217;s name.</p>
</div>
<div class="paragraph">
<p>The <code>DESCRIPTION</code> file is required by the publishing for the description shown
during the <code>skeletal list</code> command. Just put a description string into the file:</p>
</div>
<div class="listingblock">
<div class="title">DESCRIPTION</div>
<div class="content">
<pre>A simple Java application template</pre>
</div>
</div>
<div class="paragraph">
<p>As with the <code>VERSION</code> file, no quotes or markup, just text.</p>
</div>
<div class="paragraph">
<p>Finally, <code>README.md</code> contains some information about the template. This is
displayed immediately after a new project is created from the template, so it
should offer some guidance on what the template provides and what steps to
take next with the new project. Add this to the file:</p>
</div>
<div class="listingblock">
<div class="title">README.md</div>
<div class="content">
<pre>Simple Java Spock Gradle Application Project
--------------------------------------------

You have just created a simple Java application.
There is a standard project structure for source code and tests.
Simply add your source files to `app/src/main/java`, your test cases
to `app/src/test/groovy` and see below for running your application.

== Using the project:
1. Add any dependencies to build.gradle.
2. Add logic to App.java

== Building the Extension
- Build archives for distribution:
```
./gradlew assemble
```
- Build an install directory with a runnable project unpacked:
```
./gradlew installDist
```</pre>
</div>
</div>
<div class="paragraph">
<p>Although the README is not required, you really should include one. It doesn&#8217;t
have to be <a href="https://www.markdownguide.org/">Markdown</a> either or have a file extension. We just happen to like the
Markdown syntax and the way that GitHub handles files with an <code>md</code> extension.</p>
</div>
<div class="paragraph">
<p>We didn&#8217;t include it here, but we often include a graphical view of the
directory structure in the initial <code>README.md</code> created using the tree command.
This makes it easy for the user of the template to see where everything is
without hunting through the directories.</p>
</div>
<div class="listingblock">
<div class="title">example tree command</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">tree -a --dirsfirst --charset nwildner</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see the full <code>README.md</code> in <a href="https://github.com/cbmarcum/skeletal/blob/main/lazybones-templates/templates/java-gradle/README.md">java-gradle/README.md</a>.</p>
</div>
<div class="paragraph">
<p>We could simply leave the template as it is, but wouldn&#8217;t it be great if the
user could set the group ID and version for the project at creation time? That
would mean parameterizing the group and version in the build file. Not a
problem: we can add a post-install script.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_post_install_script">Creating a Post-install Script</h3>
<div class="paragraph">
<p>Post-install scripts are executed immediately after a template is unpacked into
the new project directory and just before the README is displayed. They are
straight Groovy scripts with access to just the core Groovy classes, plus
Groovy&#8217;s <code>SimpleTemplateEngine</code> and <a href="http://commons.apache.org/proper/commons-io/">Apache Commons IO</a>
(for making file manipulation easier).</p>
</div>
<div class="paragraph">
<p>Every script has access to the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>projectDir</code> - a <code>File</code> instance representing the root directory of the new project. Treat this as read-only.</p>
</li>
<li>
<p><code>fileEncoding</code> - the encoding used by your template files. You can set this at the start of the script. Defaults to UTF-8.</p>
</li>
<li>
<p><code>lazybonesVersion</code> - a string representing the version of Skeletal the user is running.</p>
</li>
<li>
<p><code>lazybonesMajorVersion</code> - a string representing the first number in the version string, e.g. "1" for "1.2.3".</p>
</li>
<li>
<p><code>lazybonesMinorVersion</code> - a string representing the second number in the version string, e.g. "2" for "1.2.3".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>lazybones*</code> properties have been retained for compatability with existing
Lazybones templates but now refer to the corresponding Skeletal versions.</p>
</div>
<div class="paragraph">
<p>The script also has access to all the public and protected methods and properties
defined in the <a href="https://github.com/cbmarcum/skeletal/blob/main/skeletal-app/src/main/groovy/uk/co/cacoethes/lazybones/LazybonesScript.groovy">LazybonesScript</a>
class. Of particular interest are the <code>ask()</code> and <code>processTemplates()</code> methods.</p>
</div>
<div class="paragraph">
<p><code>ask()</code> allows the script to request input from a user, such as 'y' or 'n' for
whether to include a particular feature or not. Even better, the user can
provide the input on the command line, bypassing the input requests all together.</p>
</div>
<div class="paragraph">
<p><code>processTemplates()</code> makes it easy to parameterize any of the files in your
template using Groovy syntax. It basically runs the source file through
Groovy&#8217;s <code>SimpleTemplateEngine</code> to produce the resulting file. So if we want
to allow the user to specify the project&#8217;s group ID and version at install
time, we modify <code>build.gradle</code> slightly:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">groovy</span><span style="color:#710">'</span></span>
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">application</span><span style="color:#710">'</span></span>
}

group = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>project_group<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
version = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>project_version<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="2"></i><b>(2)</b>

repositories {
    mavenCentral()
}
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>project_group</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>project_version</code> variable</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>and then add a post-install script, <code>lazybones.groovy</code>, in the root of the template:</p>
</div>
<div class="listingblock">
<div class="title">lazybones.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#0a8;font-weight:bold">Map</span> props = [:] <i class="conum" data-value="1"></i><b>(1)</b>

props.project_group = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'group' [org.example]: </span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.example</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">group</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
props.project_version = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'version' [0.1.0]: </span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0.1.0</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">version</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="3"></i><b>(3)</b>

processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/build.gradle</span><span style="color:#710">'</span></span>, props) <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Property Map to store properties used to process template files</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set <code>project_group</code> using <code>ask()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set <code>project_version</code> using <code>ask()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Use the template engine to process <code>app/build.gradle</code> using stored properties</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The first parameter to ask() is the user prompt message. The second is a default
value to use if the user hits enter without providing a value.  The third is a
property name in the script binding that if provided on the command line will
be used instead of prompting the user for one.</p>
</div>
<div class="paragraph">
<p>To try the template, see <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html#_installing_a_template_in_cache">installing the template to cache</a>.</p>
</div>
<div class="paragraph">
<p>Passing parameters to the script binding looks like <code>-P&lt;param&gt;=&lt;value&gt;</code></p>
</div>
<div class="paragraph">
<p>From a directory to create the test project in, create the test project:</p>
</div>
<div class="listingblock">
<div class="title">create command using parameters</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">skeletal create java-gradle 0.1.0 my-java-app -Pgroup=net.codebuilders -Pversion=1.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you provide them all, you get non-interactive creation of projects from templates.</p>
</div>
<div class="paragraph">
<p>Since we ran the build file through <code>processTemplates</code>, If you look in your
new <code>my-java-app/app/build.gradle</code> you should see group and version updated:</p>
</div>
<div class="listingblock">
<div class="title">processed build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">...
group = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">net.codebuilders</span><span style="color:#710">&quot;</span></span>
version = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1.0-SNAPSHOT</span><span style="color:#710">&quot;</span></span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before continuing <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html#_cleaning_up">cleanup the cache and test project</a>.</p>
</div>
<div class="paragraph">
<p>Another useful method available to post-install scripts is <code>transformText()</code>.
It&#8217;s common for scripts to convert strings between camel case (for class names
perhaps), lower-case hyphenated (for directory names), and other forms. The
<code>transformText()</code> method allows you to do just that:</p>
</div>
<div class="listingblock">
<div class="title">transformText() example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">uk.co.cacoethes.util.NameType</span>

<span style="color:#080;font-weight:bold">def</span> className = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MyClass</span><span style="color:#710">&quot;</span></span>
<span style="color:#080;font-weight:bold">def</span> directoryForClass = transformText(className, <span style="color:#606">from</span>: NameType.CAMEL_CASE, <span style="color:#606">to</span>: NameType.HYPHENATED)
<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(directoryForClass).mkdirs()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>from</code> and <code>to</code> arguments are both required and must be one of the <code>NameType</code>
enum values: <code>CAMEL_CASE</code> ("MyClass"), <code>PROPERTY</code> ("myClass"),
<code>HYPHENATED</code> ("my-class"), or <code>NATURAL</code> ("My Class")</p>
</div>
<div class="paragraph">
<p>We will use this later in the final script to guess the project class name from
the project directory and the project name from that prior to the ask() prompts.</p>
</div>
<div class="paragraph">
<p>Before we get back to the <code>lazybones.groovy</code> script let&#8217;s take care of a
directory issue.  When we created the project files from <code>gradle init</code> we used
a package <code>org.example</code> which added those as <code>org/example</code> subdirectories
under <code>src/main/java</code> and <code>src/test/groovy</code> and where the <code>App.java</code> and
<code>AppTest.groovy</code> are respectively. We&#8217;re going to use the script to create new
package directories at creation, so we can remove them from our template by
moving the two classes up to <code>src/main/java</code> and <code>src/test/groovy</code> and deleting
the <code>org/example</code> directories.</p>
</div>
<div class="paragraph">
<p>Edit <code>App.java</code> and change the package and class name like shown:</p>
</div>
<div class="listingblock">
<div class="title">App.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#F00;background-color:#FAA">$</span>{<span style="color:#707;font-weight:bold">project_package</span>}; <i class="conum" data-value="1"></i><b>(1)</b>

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#F00;background-color:#FAA">$</span>{project_class_name} { <i class="conum" data-value="2"></i><b>(2)</b>

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> getGreeting() {
        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World!</span><span style="color:#710">&quot;</span></span>;
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">void</span> main(<span style="color:#0a8;font-weight:bold">String</span><span style="color:#339;font-weight:bold">[]</span> args) {
        <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="color:#080;font-weight:bold">new</span> <span style="color:#F00;background-color:#FAA">$</span>{project_class_name}().getGreeting()); <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>project_package</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>project_class_name</code> variable</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We like to use the Spock naming convention of *Spec instead of *Test, so we will
rename <code>AppTest.groovy</code> to <code>AppSpec.groovy</code> and then edit as shown:</p>
</div>
<div class="listingblock">
<div class="title">AppSpec.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">package</span> <span style="color:#F00;background-color:#FAA">$</span>{project_package}

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">spock.lang.Specification</span>

<span style="color:#339;font-weight:bold">class</span> <span style="color:#F00;background-color:#FAA">$</span>{project_class_name}Spec <span style="color:#088;font-weight:bold">extends</span> Specification {
    <span style="color:#080;font-weight:bold">def</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application has a greeting</span><span style="color:#710">&quot;</span></span>() {
        <span style="color:#606">setup</span>:
        <span style="color:#080;font-weight:bold">def</span> app = <span style="color:#080;font-weight:bold">new</span> <span style="color:#F00;background-color:#FAA">$</span>{project_class_name}()

        <span style="color:#606">when</span>:
        <span style="color:#080;font-weight:bold">def</span> result = app.greeting

        <span style="color:#606">then</span>:
        result != <span style="color:#069">null</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that the project package and class name are variables, we need to edit
<code>build.gradle</code> and use variables for the main class. We will also add
settings for the jar archive basename and application name which is the
command that gets ran. These would have both defaulted to <code>app</code> since that
is the subproject we are working in.</p>
</div>
<div class="listingblock">
<div class="title">build.gradle changes</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">...
jar {
    archiveBaseName = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">${project_name}</span><span style="color:#710">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
}

application {
    mainClass = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">${project_package}.${project_class_name}</span><span style="color:#710">'</span></span> <i class="conum" data-value="2"></i><b>(2)</b>
    applicationName = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">${project_name}</span><span style="color:#710">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
}
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>project_name</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>project_package</code> and <code>project_class_name</code> variables</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The same for <code>settings.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">rootProject.name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">${project_name}</span><span style="color:#710">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>project_name</code> variable</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now edit the <code>lazybones.groovy</code> like this:</p>
</div>
<div class="listingblock">
<div class="title">lazybones.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">uk.co.cacoethes.util.NameType</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">org.apache.commons.io.FileUtils</span>

<span style="color:#0a8;font-weight:bold">Map</span> props = [:]
<i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#080;font-weight:bold">if</span> (projectDir.name =~ <span style="background-color:hsla(300,100%,50%,0.06)"><span style="color:#404">/</span><span style="color:#808">\-</span><span style="color:#404">/</span></span>) {
    props.project_class_name = transformText(projectDir.name, <span style="color:#606">from</span>: NameType.HYPHENATED, <span style="color:#606">to</span>: NameType.CAMEL_CASE)
} <span style="color:#080;font-weight:bold">else</span> {
    props.project_class_name = transformText(projectDir.name, <span style="color:#606">from</span>: NameType.PROPERTY, <span style="color:#606">to</span>: NameType.CAMEL_CASE)
}
<i class="conum" data-value="2"></i><b>(2)</b>
props.project_name = transformText(props.project_class_name, <span style="color:#606">from</span>: NameType.CAMEL_CASE, <span style="color:#606">to</span>: NameType.HYPHENATED)
<i class="conum" data-value="3"></i><b>(3)</b>
props.project_group = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'group' [org.example]: </span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">org.example</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">group</span><span style="color:#710">&quot;</span></span>)
props.project_name = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'artifactId' [</span><span style="color:#710">&quot;</span></span> + props.project_name + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">]: </span><span style="color:#710">&quot;</span></span>, props.project_name , <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">artifactId</span><span style="color:#710">&quot;</span></span>)
props.project_version = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'version' [0.1.0]: </span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0.1.0</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">version</span><span style="color:#710">&quot;</span></span>)
props.project_package = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'package' [</span><span style="color:#710">&quot;</span></span> + props.project_group + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">]: </span><span style="color:#710">&quot;</span></span>, props.project_group, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">package</span><span style="color:#710">&quot;</span></span>)
props.project_class_name = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'className' [</span><span style="color:#710">&quot;</span></span> + props.project_class_name + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">]: </span><span style="color:#710">&quot;</span></span>, props.project_class_name, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">className</span><span style="color:#710">&quot;</span></span>).capitalize()
props.project_property_name = transformText(props.project_class_name, <span style="color:#606">from</span>: NameType.CAMEL_CASE, <span style="color:#606">to</span>: NameType.PROPERTY)
props.project_capitalized_name = props.project_property_name.capitalize()
<span style="color:#0a8;font-weight:bold">String</span> packagePath = props.project_package.replace(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">.</span><span style="color:#710">'</span></span> as <span style="color:#339;font-weight:bold">char</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">as</span> <span style="color:#339;font-weight:bold">char</span>)
props.package_path = packagePath

<i class="conum" data-value="4"></i><b>(4)</b>
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">README.md</span><span style="color:#710">'</span></span>, props)
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/build.gradle</span><span style="color:#710">'</span></span>, props)
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">settings.gradle</span><span style="color:#710">'</span></span>, props)
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">gradle.properties</span><span style="color:#710">'</span></span>, props)
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/src/main/java/*.java</span><span style="color:#710">'</span></span>, props)
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/src/test/groovy/*.groovy</span><span style="color:#710">'</span></span>, props)

<span style="color:#0a8;font-weight:bold">File</span> mainSources = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(projectDir, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/src/main/java</span><span style="color:#710">'</span></span>)
<span style="color:#0a8;font-weight:bold">File</span> testSources = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(projectDir, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">app/src/test/groovy</span><span style="color:#710">'</span></span>)

<span style="color:#0a8;font-weight:bold">File</span> mainSourcesPath = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(mainSources, packagePath)
mainSourcesPath.mkdirs()
<span style="color:#0a8;font-weight:bold">File</span> testSourcesPath = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(testSources, packagePath)
testSourcesPath.mkdirs()

<span style="color:#080;font-weight:bold">def</span> renameFile = { <span style="color:#0a8;font-weight:bold">File</span> from, <span style="color:#0a8;font-weight:bold">String</span> path -&gt;
    <span style="color:#080;font-weight:bold">if</span> (from.file) {
        <span style="color:#0a8;font-weight:bold">File</span> to = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(path)
        to.parentFile.mkdirs()
        FileUtils.moveFile(from, to)
    }
}

<i class="conum" data-value="5"></i><b>(5)</b>
mainSources.eachFile { <span style="color:#0a8;font-weight:bold">File</span> file -&gt;
    renameFile(file, mainSourcesPath.absolutePath + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/</span><span style="color:#710">'</span></span> + file.name)
}
testSources.eachFile { <span style="color:#0a8;font-weight:bold">File</span> file -&gt;
    renameFile(file, testSourcesPath.absolutePath + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/</span><span style="color:#710">'</span></span> + props.project_capitalized_name + file.name)
}

renameFile(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(mainSourcesPath, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">App.java</span><span style="color:#710">'</span></span>), mainSourcesPath.absolutePath + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/</span><span style="color:#710">'</span></span> + props.project_class_name + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">.java</span><span style="color:#710">&quot;</span></span>)
renameFile(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(testSourcesPath, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">AppSpec.java</span><span style="color:#710">'</span></span>), testSourcesPath.absolutePath + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/</span><span style="color:#710">'</span></span> + props.project_class_name + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Spec</span><span style="color:#710">&quot;</span></span> + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">.groovy</span><span style="color:#710">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In the first <code>if/else</code> statement we make an educated guess about the project class
name based on the directory given to create and use <code>transformText()</code> to make
it <code>CAMEL_CASE</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Then we use the class name and <code>transformText()</code> again to make a <code>HYPHENATED</code>
project name.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Then we use these guesses as defaults when asking the user for their values next.
This pattern continues until we have all the information we need.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Then we use <code>processTemplates()</code> on all the files that have variables to replace.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Finally, we rename our sources to move them into the package directory structure and then rename the application class and test class.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_install_into_cache_and_test">Install into Cache and Test</h3>
<div class="paragraph">
<p>This is now covered in the <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html">Template Testing Companion</a> document.
To test, <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html#_installing_a_template_in_cache">install the template</a>
again, <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html#_creating_a_test_project">create the test project</a>
per the instructions, <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html#_building_and_running_the_distribution">build and run the distribution</a>
and then <a href="https://cbmarcum.github.io/skeletal/template-testing-companion.html#_cleaning_up">cleanup</a>
the cache and test project.</p>
</div>
<div class="paragraph">
<p>Once the template is ready, it&#8217;s time to publish it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_packaging_installing_and_publishing">Packaging, Installing and Publishing</h3>
<div class="paragraph">
<p>There are three options to use publishing a template, each of which can be
accomplished with a simple task provided by the <a href="https://github.com/cbmarcum/skeletal-gradle-plugin">Skeletal Gradle Plugin</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>packaging - zipping up the template directory (no manifest created)</p>
</li>
<li>
<p>installing - putting the template package directly into the local Skeletal template cache</p>
</li>
<li>
<p>publishing - making the template package and a manifest file to place in a
simple URL repository.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Publishing takes care of the packaging and creates a manifest file in one task. The first time a template is used from a repository it is also added the cache
so the install step isn&#8217;t required unless you don&#8217;t plan on using a remote repository or unless you are doing template development testing.</p>
</div>
<div class="paragraph">
<p>The relevant Gradle tasks are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>packageTemplate&lt;Name&gt;</code></p>
</li>
<li>
<p><code>packageAllTemplates</code></p>
</li>
<li>
<p><code>installTemplate&lt;Name&gt;</code></p>
</li>
<li>
<p><code>installAllTemplates</code></p>
</li>
<li>
<p><code>publishTemplate&lt;Name&gt;</code></p>
</li>
<li>
<p><code>publishAllTemplates</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The packaging tasks aren&#8217;t often used by themselves, so we&#8217;ll skip over those
right now. But installing the templates in your local cache is important so
that you can easily test them before publication. You can do this on a
per-template basis, or simply install all the templates from your <code>templates</code>
directory.</p>
</div>
<div class="paragraph">
<p>If you want to execute a task for a particular template, the <code>&lt;Name&gt;</code> in
the above tasks is derived from the name of the template, which comes from
the directory name. In our case, the template name is <code>java-gradle</code>.
To use this name in the Gradle tasks, we simply camel-case it:
<code>JavaGradle</code>. Of course, this means your directories should use
hyphenated notation rather than camel-case.</p>
</div>
<div class="paragraph">
<p>If the rules for converting between camel-case and hyphenated forms don&#8217;t suit
your template name, for example if you separate numbers with hyphens ('javaee-7'),
then you can use hyphens in the task name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>./gradlew packageTemplate-javaee-7</pre>
</div>
</div>
<div class="paragraph">
<p>Once you&#8217;re happy with the template, you can publish it for a simple URL
repository. To do that, you have to configure the build. If you have a look at
<code>my-lzb-templates/build.gradle</code>, you&#8217;ll see this section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    ...
    templateOwner = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Skeletal Project</span><span style="color:#710">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>templateOwner</code> is used in the manifest file as the template owner or creator.
This owner is used for all templates published from this lazybones project.</p>
</div>
<div class="paragraph">
<p>To publish the template and create the manifest file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>./gradlew publishTemplateJavaGradle</pre>
</div>
</div>
<div class="paragraph">
<p>This will create the zip archive and a <code>skeletal-manifest.txt</code> file. This manifest
is a simple CSV formatted text file with an entry for each template published.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>name,version,owner,description
java-gradle-template,1.0,Skeletal Project,A simple Java Spock Gradle project template</pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/cbmarcum/skeletal-gradle-plugin">Skeletal Gradle Plugin</a> for instructions on applying the plugin to your Gradle build, task usage, and advanced configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fine_tuning_the_packaging">Fine-tuning the Packaging</h3>
<div class="paragraph">
<p>The packaging process is by default rather dumb. It will include all files and
directories in the target template directory except for a few hard-coded
exceptions (the DESCRIPTION, VERSION, and .retain files for example). That
leaves a lot of scope for accidentally including temporary files in the
package! To help you avoid that, the plugin allows you to specify a set of
extra exclusions using <a href="https://ant.apache.org/manual/dirtasks.html#patterns">Apache Ant-style patterns</a>.</p>
</div>
<div class="listingblock">
<div class="title">global excludes</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    packageExclude <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.swp</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">.gradle</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">build</span><span style="color:#710">&quot;</span></span>
    ....
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These exclusions apply to all templates. If you want template-specific exclusions, then use the following syntax:</p>
</div>
<div class="listingblock">
<div class="title">template specific excludes</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    template(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java-gradle</span><span style="color:#710">&quot;</span></span>) {     <span style="color:#777">// Template (directory) name</span>
        packageExclude <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.swp</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">.settings</span><span style="color:#710">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the template-specific settings completely override the global ones, so if you want the global ones to apply you will need to repeat them in the template-specific list.</p>
</div>
<div class="paragraph">
<p>Another potential issue when packaging templates is with file and directory permissions. Lazybones attempts to retain the permissions it finds in the template directory, but these may not be correct on Windows. To compensate for that, the plugin allows you to specify file permissions in the template configuration:</p>
</div>
<div class="listingblock">
<div class="title">file permissions</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    fileMode <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">755</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">gradlew</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.sh</span><span style="color:#710">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first argument is the Unix-style permission as a string (such as <code>"600"</code>, <code>"755"</code> and so on), and the rest are a list of Ant-style patterns representing the files and directories that the permission string should apply to. You can have multiple <code>fileMode()</code> entries, although ideally you should only have one per file mode.</p>
</div>
<div class="paragraph">
<p>As with package exclusions, you can also specify file modes on a per-template basis:</p>
</div>
<div class="listingblock">
<div class="title">template specific file permissions</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    template(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">simple-java</span><span style="color:#710">&quot;</span></span>) {
        fileMode <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">600</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">secret.properties</span><span style="color:#710">&quot;</span></span>
        fileMode <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">755, </span><span style="color:#710">&quot;</span></span>gradlew<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">, </span><span style="color:#710">&quot;</span></span>**<span style="color:#777">/*.sh&quot;
    }
}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, the template-specific settings replace the global ones for that particular template.</p>
</div>
<div class="paragraph">
<p>That&#8217;s it for the getting started guide. You&#8217;ve created a template, tested it,
and finally published it for a URL repository. For the rest of the guide we&#8217;ll
look at the template creation in more detail.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simple_url_repositories">Simple URL Repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a break from the original Lazybones project and their use of Bintray for
repositories, Skeletal uses what we call a <code>Simple URL Repository</code> which can be
any <code>file:</code> or <code>http(s):</code> URL location that contains templates and a
<code>skelatal-manifest.txt</code> file that your computer has read-access to.</p>
</div>
<div class="paragraph">
<p>To create a repository just copy the manifest file and project template
archives to a local directory, file share, or webserver and use <code>file:</code> or <code>http(s)</code> type repository URLs to access them.  Configuring Skeletal to
use additional repositories is covered in the <a href="https://cbmarcum.github.io/skeletal/application-users-guide.html">Application Users Guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_template_engines">Template Engines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>processTemplates()</code> method available to post-install scripts allows you to
generate files based on templates. By default, any files that match the pattern
passed to <code>processTemplates()</code> are treated as Groovy templates that can be
processed by <a href="http://docs.groovy-lang.org/latest/html/documentation/template-engines.html#_simpletemplateengine">SimpleTemplateEngine</a>
and those source files are replaced by the processed versions. That&#8217;s not the
end of the story though.</p>
</div>
<div class="paragraph">
<p>Skeletal allows you to use any template engine that implements Groovy&#8217;s
<a href="https://docs.groovy-lang.org/latest/html/api/groovy/text/TemplateEngine.html">TemplateEngine</a>,
meaning that your source templates could be <a href="https://mustache.github.io/">Mustache</a>, <a href="https://velocity.apache.org/">Apache Velocity</a>, or anything else. Of course, not every template engine has a Groovy implementation, but it&#8217;s
often trivial to create an adapter <code>TemplateEngine</code> implementation.</p>
</div>
<div class="paragraph">
<p>For the following examples, we&#8217;ll use our <a href="https://github.com/cbmarcum/groovy-handlebars-engine">Groovy Handlebars Engine</a> implementation of <a href="https://jknack.github.io/handlebars.java/">Handlebars.java</a>.</p>
</div>
<div class="paragraph">
<p>The first step to using an alternative template engine is to include the implementation JAR in the post-install script for your project template. Lazybones uses Groovy&#8217;s <a href="https://docs.groovy-lang.org/latest/html/documentation/grape.html#_add_a_dependency">@Grab</a> annotation for that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#007">@Grab</span>(group=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">net.codebuilders</span><span style="color:#710">&quot;</span></span>, module=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">groovy-handlebars-engine</span><span style="color:#710">&quot;</span></span>, version=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0.3.0-M1</span><span style="color:#710">&quot;</span></span>)
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">uk.co.cacoethes.handlebars.HandlebarsTemplateEngine</span>

registerDefaultEngine <span style="color:#080;font-weight:bold">new</span> HandlebarsTemplateEngine()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Handlebars engine JAR is in Maven Central that @Grab automatically searches. If you have the JAR hosted elsewhere, you&#8217;ll need to use <a href="https://docs.groovy-lang.org/latest/html/documentation/grape.html#Grape-SpecifyAdditionalRepositories">@GrabResolver</a>.</p>
</div>
<div class="paragraph">
<p><em>As of Skeletal 0.19.0, Groovy Handlebars Engine is an included library, so @Grab is not required as it is already on the classpath.  Other alternative template engines will still require it.</em></p>
</div>
<div class="paragraph">
<p>Once you have the JAR on the script&#8217;s classpath, you can register the engine. There are several ways to do this depending on what you want to do. The above example uses <code>registerDefaultEngine()</code> to make the Handlebars template engine the default, which means that any files handled by <code>processTemplates</code> will be treated as Handlbars templates rather than Groovy ones.</p>
</div>
<div class="paragraph">
<p>What if you want to use different engines for different templates? Or perhaps you prefer to give the source templates a suffix that identifies them as such? In these cases, you can use <code>registerEngine()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">uk.co.cacoethes.handlebars.HandlebarsTemplateEngine</span>

registerEngine <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hbs</span><span style="color:#710">&quot;</span></span>, <span style="color:#080;font-weight:bold">new</span> HandlebarsTemplateEngine()

processTemplates <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.groovy</span><span style="color:#710">&quot;</span></span>, [<span style="color:#606">foo</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method registers a template engine against a specific suffix. If any files match the <code>processTemplates()</code> pattern with the addition of the registered suffix, Lazybones will use the corresponding template engine for that file.</p>
</div>
<div class="paragraph">
<p>So let&#8217;s say your template project has a <code>src/main/groovy/org/example/App.groovy.hbs</code> file. The <code>App.groovy</code> part matches the pattern and <code>hbs</code> is a registered extension. So that file will be processed by the Handlebars template engine, creating a <code>src/main/groovy/org/example/App.groovy</code> file in the target project. Here&#8217;s a summary of how source template files are processed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Filename</th>
<th class="tableblock halign-left valign-top">Resulting file</th>
<th class="tableblock halign-left valign-top">Processing</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registered default template engine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy.gtpl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groovy template engine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy.hbs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handlebars template engine</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Skeletal automatically registers the Groovy template engine against the suffix <code>gtpl</code>. Also note that you should not include the template suffix in your file pattern. If you try:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">processTemplates <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*.hbs</span><span style="color:#710">&quot;</span></span>, [<span style="color:#606">foo</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>then Skeletal will in fact use the default template engine for any source file that has a hbs suffix. It&#8217;s better to use the <code><strong>*/</strong></code> pattern instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">processTemplates <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*</span><span style="color:#710">&quot;</span></span>, [<span style="color:#606">foo</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then any files ending with <code>hbs</code> will be processed with the Handlebars template engine. This does raise a problem: the pattern above will match non-template files too, and Skeletal will process those files with the default template engine.</p>
</div>
<div class="paragraph">
<p>If you do want to take this approach, then you can disable the default template engine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">uk.co.cacoethes.handlebars.HandlebarsTemplateEngine</span>

registerEngine <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hbs</span><span style="color:#710">&quot;</span></span>, <span style="color:#080;font-weight:bold">new</span> HandlebarsTemplateEngine()
clearDefaultEngine()

processTemplates <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">**/*</span><span style="color:#710">&quot;</span></span>, [<span style="color:#606">foo</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will ensure that only source files with a registered template suffix get processed. All other files are left untouched.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_subtemplates">Subtemplates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s very easy to add subtemplate support to your project templates. The key
points to understand are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subtemplates are similar to project templates but packaged inside a project
template zip.</p>
</li>
<li>
<p>A subtemplate can be included in multiple project templates.</p>
</li>
<li>
<p>Subtemplates <em>only</em> take effect when the user runs the <code>skeletal generate</code> command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s say you want to add a subtemplate for generating Spock test classes in a
project created from the <code>java-gradle</code> template we introduced
earlier. Your starting point is to create a new directory for the subtemplate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>templates/subtmpl-spock-spec</pre>
</div>
</div>
<div class="paragraph">
<p>Note that although the subtemplate will be going inside the <code>java-gradle</code>
template, its directory is at the same level as <code>templates/java-gradle</code>.
The key is to give the directory name as 'subtmpl-' prefix, as this is what
tells the build that it&#8217;s a subtemplate, resulting in
<code>subtmpl-spock-spec</code> being excluded from the <code>*AllTemplates</code> tasks.</p>
</div>
<div class="paragraph">
<p>The contents of a subtemplate source directory look a little like a normal
project template, except you are unlikely to include as many files and the
README is unnecessary. In this case, we want:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>VERSION</strong> - the file containing the current version of the subtemplate</p>
</li>
<li>
<p><strong>lazybones.groovy</strong> - the post-install script</p>
</li>
<li>
<p><strong>Spec.groovy.gtpl</strong> - the template source file for test classes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these files behaves in the same way as in a project template, but there
are a few slight differences. Consider the template source file for tests:</p>
</div>
<div class="listingblock">
<div class="title">Spec.groovy.gtpl</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">package</span> <span style="color:#F00;background-color:#FAA">$</span>{pkg}

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">spock.lang.Specification</span>

<span style="color:#339;font-weight:bold">class</span> <span style="color:#F00;background-color:#FAA">$</span>{cls} <span style="color:#088;font-weight:bold">extends</span> Specification {

    <span style="color:#080;font-weight:bold">def</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">application has a greeting</span><span style="color:#710">&quot;</span></span>() {
        <span style="color:#606">given</span>: <span style="color:#777">// setup</span>
        <span style="color:#080;font-weight:bold">def</span> app = <span style="color:#080;font-weight:bold">new</span> <span style="color:#F00;background-color:#FAA">$</span>{parentClassName}()

        <span style="color:#606">when</span>: <span style="color:#777">// stimulus</span>
        <span style="color:#080;font-weight:bold">def</span> result = app.greeting

        <span style="color:#606">then</span>: <span style="color:#777">// response</span>
        result != <span style="color:#069">null</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This references several properties: <code>pkg</code>, <code>cls</code>, and <code>parentClassName</code>. Where
do these parameters come from? We need to look into the post-install script
<code>lazybones.groovy</code>, to find out:</p>
</div>
<div class="listingblock">
<div class="title">lazybones.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">org.apache.commons.io.FileUtils</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">org.apache.commons.io.FilenameUtils</span>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">static</span> <span style="color:#B44;font-weight:bold">org.apache.commons.io.FilenameUtils.concat</span>

<span style="color:#0a8;font-weight:bold">Map</span> props = [:]
<span style="color:#777">// Pass in parameters from the project template</span>
<span style="color:#0a8;font-weight:bold">String</span> parentPackage = parentParams.package <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>
props.parentClassName = parentParams.className <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>

props.pkg = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value 'package' [</span><span style="color:#710">&quot;</span></span> + parentPackage + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">]: </span><span style="color:#710">&quot;</span></span>, parentPackage, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">package</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
props.cls = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Define value for 'class' name: [SimpleSpec]</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SimpleSpec</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">class</span><span style="color:#710">&quot;</span></span>).capitalize() <i class="conum" data-value="1"></i><b>(1)</b>

processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Spec.groovy</span><span style="color:#710">&quot;</span></span>, props)

<span style="color:#0a8;font-weight:bold">String</span> pkgPath = props.pkg.replace(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">.</span><span style="color:#710">'</span></span> as <span style="color:#339;font-weight:bold">char</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">as</span> <span style="color:#339;font-weight:bold">char</span>)
<span style="color:#0a8;font-weight:bold">String</span> filename = props.cls.capitalize() + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">.groovy</span><span style="color:#710">&quot;</span></span>
<span style="color:#0a8;font-weight:bold">File</span> destFile = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(projectDir, concat(concat(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">app/src/test/groovy</span><span style="color:#710">&quot;</span></span>, pkgPath), filename))
destFile.parentFile.mkdirs()

FileUtils.moveFile(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">File</span>(templateDir, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Spec.groovy</span><span style="color:#710">&quot;</span></span>), destFile) <i class="conum" data-value="4"></i><b>(4)</b>

println <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Created new Spock Test </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>FilenameUtils.normalize(destFile.path)<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As you can see, the <code>pkg</code> and <code>cls</code> properties are mapped from the return
values of two <code>ask()</code> calls. This is standard post-install script behavior.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The interesting properties, <code>parentPackage</code> and <code>parentClassName</code>, are mapped from
something new: the <code>parentParams</code> map. This contains any named parameters used
by the <strong>parent project template</strong>, i.e. java-gradle in this case.
Because of this, <code>parentParams</code> only exists for subtemplates.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Only <code>parentClassName</code> is used in the template so it is in the <code>prop</code> map where
<code>parentPackage</code> is a property only used within the script.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Another novel aspect of the post-install script is the reference to a
<code>templateDir</code> property in addition to <code>projectDir</code>. This is because
subtemplates are not unpacked directly in the project directory. Instead,
Lazybones unpacks them into the project&#8217;s .lazybones directory. <code>templateDir</code>
points to the location of the unpacked subtemplate, whereas <code>projectDir</code> still
points to the root directory of the project created from
<code>java-gradle</code>. So your subtemplate post-install script will
typically want to copy or move files from <code>templateDir</code> to <code>projectDir</code>. The
Commons IO classes that all post-install scripts have access to are ideal for
this.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>With all the subtemplates files in place, all you need to do is tell the build
that the simple-java project template should include the entity subtemplate.
So open up the build file and add this line to the <code>lazybones</code> block:</p>
</div>
<div class="listingblock">
<div class="title">include subtemplates</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    ...
    template <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java-gradle</span><span style="color:#710">&quot;</span></span> includes <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">spock-spec</span><span style="color:#710">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note how the name of the subtemplate excludes the 'subtmpl-' prefix. Now when
you package the simple-java project template, the entity subtemplate will be
included in it, ready for use with Lazybones' <code>generate</code> command.</p>
</div>
<div class="paragraph">
<p>If you want to include multiple subtemplates, just pass extra arguments to <code>includes()</code>:</p>
</div>
<div class="listingblock">
<div class="title">include multiple subtemplates</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">lazybones {
    ...
    template <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java-gradle</span><span style="color:#710">&quot;</span></span> includes <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">spock-spec</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">controller</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">repository</span><span style="color:#710">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is one final option available to template authors. What if you want to
package the spock-test, controller, and repository template files into a single
subtemplate package? How would the user be able to specify which type of class
they want to generate? The answer is through template qualifiers.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you have an 'artifact' subtemplate that includes Spec.groovy.gtpl, Controller.groovy.gtpl, etc. The user can run the <code>generate</code> command like this to determine which artifact type to use:</p>
</div>
<div class="listingblock">
<div class="title">generate controller</div>
<div class="content">
<pre>skeletal generate artifact::controller</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>::</code> separates the subtemplate name, 'artifact', from the qualifier,
'controller'. In your post-install script, you can access the qualifiers through
a <code>tmplQualifiers</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">def</span> artifactTemplate
<span style="color:#080;font-weight:bold">if</span> (tmplQualifiers) {
    artifactTemplate = tmplQualifiers[<span style="color:#00D">0</span>].capitalize() + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">.groovy.gtpl</span><span style="color:#710">&quot;</span></span>
}
<span style="color:#080;font-weight:bold">else</span> {
    artifactTemplate = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Which type of artifact do you want to generate? </span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">type</span><span style="color:#710">&quot;</span></span>)
}

<span style="color:#777">// ... process the corresponding template file.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The user can even pass extra qualifiers simply by separating them with <code>::</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>skeletal generate artifact::controller::org.example::Book</pre>
</div>
</div>
<div class="paragraph">
<p>This is why <code>tmplQualifiers</code> is a list. It retains the order that the qualifiers are specified on the command line.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> qualifiers should not be used for general parameterization such as packages and class names. Think carefully before supporting more than a single qualifier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_post_install_script_in_depth">Post Install Script In-depth</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>lazybones.groovy</code> post install script is a generic groovy script with a few extra
helper methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ask(String message, defaultValue = null)</code> - asks the user a question and returns their answer, or <code>defaultValue</code> if no
answer is provided</p>
</li>
<li>
<p><code>ask(String message, defaultValue, String propertyName)</code> - works similarly to the <code>ask()</code> above, but allows
grabbing variables from the command line as well based on the <code>propertyName</code>.</p>
</li>
<li>
<p><code>processTemplates(String filePattern, Map substitutionVariables)</code> - use ant pattern matching to find files and filter their
contents in place using Groovy&#8217;s <code>SimpleTemplateEngine</code>.</p>
</li>
<li>
<p><code>hasFeature(String featureName)</code> - checks if the script has access to a feature, <code>hasFeature("ask")</code> or
<code>hasFeature("processTemplates")</code> would both return true</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can get a complete list of the available methods from the <a href="https://github.com/cbmarcum/skeletal/blob/main/skeletal-app/src/main/groovy/uk/co/cacoethes/lazybones/LazybonesScript.groovy">LazybonesScript class</a>.</p>
</div>
<div class="paragraph">
<p>Here is a very simple example <code>lazybones.groovy</code> script that asks the user for
a couple of values and uses those to populate properties in the template&#8217;s build
file:</p>
</div>
<div class="listingblock">
<div class="title">lazybones.groovy example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span style="color:#080;font-weight:bold">def</span> props = [:]
props[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">groupId</span><span style="color:#710">&quot;</span></span>] = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">What is the group ID for this project?</span><span style="color:#710">&quot;</span></span>)
props[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">version</span><span style="color:#710">&quot;</span></span>] = ask(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">What is the project's initial version?</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0.1</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">version</span><span style="color:#710">&quot;</span></span>)

processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">*.gradle</span><span style="color:#710">&quot;</span></span>, props)
processTemplates(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">pom.xml</span><span style="color:#710">&quot;</span></span>, props)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The main Gradle build file might then look like this:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">groovy</span><span style="color:#710">'</span></span>
    id <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">application</span><span style="color:#710">'</span></span>
}

&lt;% <span style="color:#080;font-weight:bold">if</span> (group) { %&gt; <i class="conum" data-value="2"></i><b>(2)</b>
group = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>project_group<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
&lt;% } %&gt;
version = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>project_version<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>${}</code> expressions are executed as Groovy expressions, and they have access
to any variables in the property map passed to <code>processTemplates()</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Scriptlets, i.e. code inside <code>&lt;% %&gt;</code> delimiters, allow for more complex logic.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-12-13 14:38:55 -0500
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
        (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>